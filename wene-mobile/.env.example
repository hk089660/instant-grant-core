# we-ne Mobile Environment Variables
# Copy this file to .env.local and fill in values

# ===================
# Solana Configuration
# ===================

# RPC endpoint (devnet). Expo では EXPO_PUBLIC_  prefix が必須
# デフォルト: OnFinality (Ankr は API キー必須、公式は 403 頻発)
# 代替例: https://devnet.helius-rpc.com/?api-key=YOUR_KEY
EXPO_PUBLIC_SOLANA_RPC_URL=https://solana-devnet.api.onfinality.io/public

# Cluster (devnet | mainnet-beta). release ビルドでも devnet テストする場合は devnet を指定
EXPO_PUBLIC_SOLANA_CLUSTER=devnet

# Grant program ID (deployed address)
# Get this from `anchor deploy` output
PROGRAM_ID=

# ===================
# App Configuration
# ===================

# App URL for Phantom deep links
APP_URL=https://wene.app

# Enable debug logging (true | false)
DEBUG_LOGGING=false

# Layout debug: red borders on containers (1 | true to enable)
# EXPO_PUBLIC_DEBUG_LAYOUT=1

# ===================
# School PoC API (http only)
# ===================

# 実運用は常に http（Cloudflare Worker API）を使用
EXPO_PUBLIC_API_MODE=http

# http モード時の API ベースURL（末尾スラッシュ無し）
# ローカル: http://localhost:8787
# Cloudflare Workers (canonical): https://instant-grant-core.haruki-kira3.workers.dev
EXPO_PUBLIC_API_BASE_URL=http://localhost:8787
# 優先設定（gen-redirects / PoP 証明取得で使用）
# EXPO_PUBLIC_SCHOOL_API_BASE_URL=http://localhost:8787

# PoP（Proof of Process）署名者公開鍵（base58）
# 管理者の参加券発行時、on-chain PoP 検証設定として使用
# EXPO_PUBLIC_POP_SIGNER_PUBKEY=<base58 pubkey>

# upsert_pop_config を実行する場合のみ true（旧デプロイ互換のため既定は false）
# EXPO_PUBLIC_ENABLE_POP_CONFIG_UPSERT=false

# claim 時に PoP 署名検証命令を付与する場合のみ true（既定: false = legacy claim フォールバック）
# EXPO_PUBLIC_ENABLE_ONCHAIN_POP_CLAIM=false

# on-chain PoP 強制モード（既定: true）
# true の場合、on-chain 設定済みイベントは Phantom 接続 + 署名証跡が必須
# EXPO_PUBLIC_ENFORCE_ONCHAIN_POP=true

# Cloudflare Pages 等の固定HTTPS（印刷QRのベースURL、末尾スラッシュ無し）
# EXPO_PUBLIC_BASE_URL=https://<cloudflare-pages-domain>

# 学校参加券のSPLトークン設定（任意）
# 未設定時は src/solana/devnetConfig.ts の値を使用
# EXPO_PUBLIC_SCHOOL_TICKET_MINT=<mint pubkey>
# EXPO_PUBLIC_SCHOOL_TICKET_AUTHORITY=<grant authority pubkey>
# EXPO_PUBLIC_SCHOOL_TICKET_GRANT_ID=<grant id (u64)>

# --- Cloudflare 本番運用（Pages + Workers）---
# EXPO_PUBLIC_API_MODE=http
# EXPO_PUBLIC_API_BASE_URL=https://instant-grant-core.haruki-kira3.workers.dev
# EXPO_PUBLIC_BASE_URL=https://<your-pages>.pages.dev
