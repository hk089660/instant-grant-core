# Asuka Network Core (Prototype)
> **Proof of Process (PoP) ã«åŸºã¥ãã€æ—¥æœ¬ç™ºã®ç›£æŸ»å¯èƒ½ãªå…¬å…±ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ãƒ»ãƒ—ãƒ­ãƒˆã‚³ãƒ«**

[![Solana](https://img.shields.io/badge/Solana-Mainnet-green?style=flat&logo=solana)]
[![Edge](https://img.shields.io/badge/Edge-Cloudflare_Workers-orange?style=flat&logo=cloudflare)]
[![License](https://img.shields.io/badge/License-MIT-blue)]
[![Status](https://img.shields.io/badge/Status-Mitou_Applied-red)]

## âš¡ ãƒ‡ãƒ¢ã‚’ä½“é¨“ã™ã‚‹ (We-ne)
Asuka Networkä¸Šã§ç¨¼åƒã™ã‚‹æœ€åˆã®è¡Œæ”¿ãƒ»å…¬å…±å‘ã‘ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹å®Ÿè£…ã€ŒWe-neã€ã¯ã€ä»Šã™ããƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ä½“é¨“å¯èƒ½ã§ã™ã€‚
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦ã€‚ã‚¨ãƒƒã‚¸ã§å‹•ä½œã™ã‚‹çˆ†é€Ÿã®æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

[ğŸš€ **Launch We-ne (Web App)**](ã“ã“ã«Cloudflareã®URLã‚’è²¼ã‚‹)

---

## ğŸ“– ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
**Asuka Network** ã¯ã€è¡Œæ”¿æ‰‹ç¶šãã‚„åŠ©æˆé‡‘çµ¦ä»˜ã«ãŠã‘ã‚‹ã€Œãƒ—ãƒ­ã‚»ã‚¹ã®ä¸é€æ˜æ€§ï¼ˆProcess Opacityï¼‰ã€ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚ŒãŸã€æ¬¡ä¸–ä»£ã®å…¬å…±ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚

æ—¢å­˜ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã¯ã€Œçµæœï¼ˆæ®‹é«˜ã®ç§»å‹•ï¼‰ã€ã®æ•´åˆæ€§ã¯ä¿è¨¼ã—ã¾ã™ãŒã€ã€Œéç¨‹ï¼ˆã©ã®ã‚ˆã†ãªæ‰‹ç¶šãã‚’çµŒã¦ãã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãŒç”Ÿæˆã•ã‚ŒãŸã‹ï¼‰ã€ã¯ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã§ã—ãŸã€‚
æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€Web2çš„ãªAPIãƒ­ã‚°ã‚’ä¸å¯é€†ãªãƒãƒƒã‚·ãƒ¥ãƒã‚§ãƒ¼ãƒ³ã¨ã—ã¦åˆ»ã¿ã€ãã‚Œã‚’ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã®æ±ºæ¸ˆã¨æ•°å­¦çš„ã«çµåˆã•ã›ã‚‹ **ã€ŒProof of Process (PoP)ã€** ã¨ã„ã†æ–°ãŸãªã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹æ¦‚å¿µã‚’æå”±ãƒ»å®Ÿè£…ã—ã¾ã™ã€‚

## ğŸ— ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼šä¸‰ä½ä¸€ä½“ã®ä¿¡é ¼åŸºç›¤
æœ¬ãƒªãƒã‚¸ãƒˆãƒªã¯ã€ä»¥ä¸‹ã®3å±¤æ§‹é€ ï¼ˆTrinity Architectureï¼‰ã«ã‚ˆã£ã¦ã€Œè²¬ä»»ã®æ‰€åœ¨ã€ã‚’ã‚³ãƒ¼ãƒ‰ã§å®šç¾©ã—ã¾ã™ã€‚



### 1. Layer 1: The Vault (çµæœã®ä¿è¨¼)
* **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯:** Rust, Anchor Framework (Solana SVM)
* **å½¹å‰²:** ä¾¡å€¤ã®ä¿å­˜ã¨æ±ºæ¸ˆã®ãƒ•ã‚¡ã‚¤ãƒŠãƒªãƒ†ã‚£ã€‚
* **é©æ–°ç‚¹:** **PDA (Program Derived Address)** ã®æ±ºå®šè«–çš„ãªã‚·ãƒ¼ãƒ‰ç”Ÿæˆã‚’ç”¨ã„ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¾å­˜ã™ã‚‹ã“ã¨ãªãã€ç‰©ç†æ³•å‰‡ãƒ¬ãƒ™ãƒ«ã§ã€ŒäºŒé‡çµ¦ä»˜ï¼ˆDouble-Spendingï¼‰ã€ã‚’é˜²æ­¢ã—ã¾ã™ã€‚
* [ğŸ“‚ View Contract Code](./grant_program)

### 2. Layer 2: The Time (éç¨‹ã®è¨¼æ˜)
* **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯:** TypeScript, Cloudflare Workers (Edge Computing)
* **å½¹å‰²:** æ™‚é–“ã¨ãƒ—ãƒ­ã‚»ã‚¹ã®ç›£æŸ»äººã€‚
* **é©æ–°ç‚¹:** å…¨ã¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¯¾ã—ã€ç›´å‰ã®ãƒ­ã‚°ãƒãƒƒã‚·ãƒ¥ã‚’å«ã‚€ **Append-only Hash Chain** ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ç”Ÿæˆã—ã¾ã™ã€‚
    * ã“ã‚Œã«ã‚ˆã‚Šã€ãŸã¨ãˆç®¡ç†è€…ã§ã‚ã£ã¦ã‚‚ã€éå»ã®å±¥æ­´ã‚’1ãƒ“ãƒƒãƒˆãŸã‚Šã¨ã‚‚æ”¹ã–ã‚“ãƒ»éš è”½ã™ã‚‹ã“ã¨ã¯æ•°å­¦çš„ã«ä¸å¯èƒ½ã§ã™ã€‚
* [ğŸ“‚ View API Code](./api-worker)

### 3. Layer 3: The Interface (æ„æ€ã®ä¿è­·)
* **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯:** React Native, React Native Web, NaCl
* **å½¹å‰²:** å¸‚æ°‘ã®ãŸã‚ã®ä¸»æ¨©çš„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€‚
* **é©æ–°ç‚¹:** **NaCl (Curve25519)** ã‚’ç”¨ã„ãŸã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰æš—å·åŒ– (E2EE) ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç½²åï¼ˆæ„æ€ï¼‰ãŒãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«å±Šãã¾ã§ã€ä¸­é–“è€…æ”»æ’ƒã‹ã‚‰å®Œå…¨ã«ä¿è­·ã•ã‚Œã¾ã™ã€‚æ¤œé–²è€æ€§ã‚’æŒã¤PWAã¨ã—ã¦å±•é–‹ã•ã‚Œã¾ã™ã€‚
* [ğŸ“‚ View Mobile Code](./wene-mobile)

## ğŸ¦ å“²å­¦ï¼šWinnyã®ãã®å…ˆã¸
ã‹ã¤ã¦P2PæŠ€è¡“ã¯ã€Œç®¡ç†è€…ã®ã„ãªã„è‡ªç”±ã€ã‚’ç›®æŒ‡ã—ã¾ã—ãŸãŒã€ç¤¾ä¼šãŒæ±‚ã‚ã¦ã„ãŸã®ã¯ã€Œè²¬ä»»ã®æ‰€åœ¨ãŒæ˜ç¢ºãªä¿¡é ¼ã€ã§ã—ãŸã€‚
Asuka Networkã¯ã€P2Pã®è‡ªå¾‹åˆ†æ•£æ€æƒ³ã‚’ç¶™æ‰¿ã—ã¤ã¤ã€**ã€ŒProof of Processã€ã«ã‚ˆã‚‹å®Œå…¨ãªç›£æŸ»å¯èƒ½æ€§ï¼ˆAuditabilityï¼‰** ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€è¡Œæ”¿ã‚„å…¬å…±ã‚µãƒ¼ãƒ“ã‚¹ãŒå®‰å¿ƒã—ã¦ä¾å­˜ã§ãã‚‹ã€å›½ç”£ã®ãƒ‡ã‚¸ã‚¿ãƒ«å…¬å…±åŸºç›¤ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚

## ğŸ›  ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— (æœªè¸æœŸé–“ä¸­ã®ç›®æ¨™)
- [x] **Phase 1: Genesis (å®Œäº†)**
    - SVMã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ(Rust)ã¨ã‚¨ãƒƒã‚¸ãƒãƒƒã‚·ãƒ¥ãƒã‚§ãƒ¼ãƒ³(TS)ã®çµ±åˆå®Ÿè£…ã€‚
    - MVPã‚¢ãƒ—ãƒªã€ŒWe-neã€ã®PWAãƒ‡ãƒ—ãƒ­ã‚¤ã€‚
- [ ] **Phase 2: Gating (é–‹ç™ºä¸­)**
    - APIå±¤ã‹ã‚‰ã®æœ‰åŠ¹ãªPoPè¨¼æ˜ãŒãªã„ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã€L1ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆå´ã§å¼·åˆ¶çš„ã«æ‹’çµ¶ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…ã€‚
- [ ] **Phase 3: Federation**
    - è‡ªæ²»ä½“ã‚„å…¬å…±æ©Ÿé–¢ãŒãƒãƒ¼ãƒ‰ã¨ã—ã¦å‚åŠ å¯èƒ½ãªã€ã‚³ãƒ³ã‚½ãƒ¼ã‚·ã‚¢ãƒ ãƒ»ãƒ¢ãƒ‡ãƒ«ã¸ã®æ‹¡å¼µã€‚

## ğŸ‘¨ğŸ’» Author
**Kira (hk089660)**
* 19æ­³ã€‚Asuka Network ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆã€‚
* *Driven by the legacy of Winny, powered by modern cryptography.*

---

# We-ne (instant-grant-core)

We-ne ã¯ã€Solana ä¸Šã§éä¿ç®¡å‹ã®æ”¯æ´é…å¸ƒã¨å‚åŠ åˆ¸é‹ç”¨ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã®ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—/è©•ä¾¡ã‚­ãƒƒãƒˆã§ã™ã€‚receipt è¨˜éŒ²ã‚’ç”¨ã„ãŸç¬¬ä¸‰è€…æ¤œè¨¼æ€§ã¨é‡è¤‡å—å–é˜²æ­¢ã‚’é‡è¦–ã—ã¦ã„ã¾ã™ã€‚

> ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆ2026å¹´2æœˆ11æ—¥æ™‚ç‚¹ï¼‰: **PoC / devnet-first**ã€‚æœ¬ç•ª mainnet é‹ç”¨ã§ã¯ãªãã€å†ç¾æ€§ã¨å¯©æŸ»å‘ã‘æ¤œè¨¼ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

[English README](./README.md) | [Architecture](./docs/ARCHITECTURE.md) | [Devnet Setup](./docs/DEVNET_SETUP.md) | [Security](./docs/SECURITY.md)

## ã“ã®ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãŒè§£æ±ºã™ã‚‹ã“ã¨

- éä¿ç®¡å‹é…å¸ƒ: å—å–è€…ã¯è‡ªåˆ†ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã§ç½²åã—ã€ã‚¢ãƒ—ãƒªã¯ç§˜å¯†éµã‚’ä¿æŒã—ãªã„ã€‚
- ç›£æŸ»å¯èƒ½æ€§: tx/receipt è¨˜éŒ²ã¯ Solana Explorer ã§ç‹¬ç«‹ã—ã¦æ¤œè¨¼ã§ãã‚‹ã€‚
- é‡è¤‡å—å–é˜²æ­¢: receipt ãƒ­ã‚¸ãƒƒã‚¯ã§ 1 å›å—å–ã‚’å¼·åˆ¶ã—ã€å­¦æ ¡ãƒ•ãƒ­ãƒ¼ã§ã®å†ç”³è«‹ã¯äºŒé‡æ”¯æ‰•ã„ã§ã¯ãªã \`already joined\` ã®é‹ç”¨å®Œäº†æ‰±ã„ã«ãªã‚‹ã€‚

## ç¾åœ¨ã® PoC ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

- Devnet E2E claim ãƒ•ãƒ­ãƒ¼ãŒåˆ©ç”¨å¯èƒ½ï¼ˆwallet sign -> send -> Explorer æ¤œè¨¼ï¼‰ã€‚
- å­¦æ ¡ã‚¤ãƒ™ãƒ³ãƒˆ QR ãƒ•ãƒ­ãƒ¼ãŒåˆ©ç”¨å¯èƒ½ï¼ˆ\`/admin\` -> å°åˆ· QR -> \`/u/scan\` -> \`/u/confirm\` -> \`/u/success\`ï¼‰ã€‚
- Success ç”»é¢ã§ tx signature + receipt pubkey + Explorer ãƒªãƒ³ã‚¯ï¼ˆdevnetï¼‰ã‚’ç¢ºèªã§ãã‚‹ã€‚
- å†ç”³è«‹ã¯ \`already joined\` ã®é‹ç”¨å®Œäº†ã¨ã—ã¦æ‰±ã‚ã‚Œã€äºŒé‡æ”¯æ‰•ã„ã¯ã—ãªã„ã€‚

## ä¿¡é ¼ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼šFairScaleã«ã‚ˆã‚‹å‚åŠ ãƒ»å—çµ¦è³‡æ ¼ã‚²ãƒ¼ãƒˆ

çŠ¶æ…‹ï¼šäºˆå®š

- FairScale ã¯ã€æ¿«ç”¨è€æ€§ï¼ˆSybil åœ§åŠ›å¯¾ç­–ï¼‰ã®ãŸã‚ã®ä¿¡é ¼ã‚·ã‚°ãƒŠãƒ«ã¨ã—ã¦å°å…¥äºˆå®šã§ã‚ã‚Šã€è¦‹ãŸç›®ã ã‘ã®ãƒ©ãƒ™ãƒ«ã§ã¯ãªã„ã€‚
- äºˆå®šã—ã¦ã„ã‚‹è³‡æ ¼ã‚²ãƒ¼ãƒˆé©ç”¨ç‚¹ã¯ã€\`POST /v1/school/claims\` ã®ã‚¯ãƒ¬ãƒ¼ãƒ å—ç†å‰ã¨ã€å‚åŠ è€…è­˜åˆ¥ãƒˆãƒ¼ã‚¯ãƒ³ã®ã‚µãƒ¼ãƒãƒ¼å´ç™ºè¡Œ/æ¤œè¨¼å‰ã€‚
- ç¾åœ¨ã‚³ãƒ¼ãƒ‰ã§å¼·åˆ¶ã—ã¦ã„ã‚‹è³‡æ ¼ã‚²ãƒ¼ãƒˆã¯ã€ã‚¤ãƒ™ãƒ³ãƒˆçŠ¶æ…‹ã®è³‡æ ¼åˆ¤å®šï¼ˆ\`published\` ã®ã¿ï¼‰ã¨ã€\`walletAddress\` / \`joinToken\` ã«ã‚ˆã‚‹é‡è¤‡ä¸»ä½“åˆ¤å®šï¼ˆé‡è¤‡æ™‚ã¯äºŒé‡æ”¯æ‰•ã„ã§ã¯ãªã \`alreadyJoined\` ã‚’è¿”ã™ï¼‰ã€‚
- FairScale ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ çµ±åˆã¯æœªå®Ÿè£…ã§ã€ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã¯ \`./docs/ROADMAP.md\`ï¼ˆ\`FairScale Integration\`ï¼‰ã«è¨˜è¼‰ã•ã‚Œã€\`./docs/SECURITY.md\` ã§ã‚‚ planned ã¨ã—ã¦å‚ç…§ã—ã¦ã„ã‚‹ã€‚
- æ¿«ç”¨æŠ‘æ­¢ã®åŠ¹æœã¨ã—ã¦ã€ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ receipt åˆ¶å¾¡ã¨ã‚ªãƒ•ãƒã‚§ãƒ¼ãƒ³è³‡æ ¼ã‚²ãƒ¼ãƒˆã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€éä¿ç®¡å‹ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ç¶­æŒã—ãªãŒã‚‰é‡è¤‡ã‚¯ãƒ¬ãƒ¼ãƒ çµŒè·¯ã‚’æ¸›ã‚‰ã›ã‚‹ã€‚
- ç¾æ™‚ç‚¹ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼æ¤œè¨¼ã¯ã€\`cd wene-mobile && npm run test:server\` ã¨ \`cd api-worker && npm test\` ã‚’å®Ÿè¡Œã—ã€\`/v1/school/claims\` ã® \`eligibility\` / \`alreadyJoined\` æŒ™å‹•ã‚’ç¢ºèªã™ã‚‹ã€‚

Reviewer shortcut: \`./wene-mobile/server/routes/v1School.ts\`ã€\`./api-worker/src/claimLogic.ts\`ã€\`./docs/SECURITY.md\`ã€\`./docs/ROADMAP.md\` ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

Why it matters for Solana Foundation / Instagrant: ç›£æŸ»å¯èƒ½æ€§ã‚’ç¶­æŒã—ãŸ permissionless onboarding ã¨ã€ã‚ˆã‚Šå¼·ã„æ¿«ç”¨è€æ€§ã‚’ä¸¡ç«‹ã™ã‚‹ãŸã‚ã®è¦ç´ ã§ã™ã€‚

## ã‚«ãƒ¡ãƒ©/QRã‚¹ã‚­ãƒ£ãƒ³å®Ÿè£…çŠ¶æ³

çŠ¶æ…‹ï¼šå®Ÿè£…æ¸ˆã¿ï¼ˆPoCï¼‰

- ç¾åœ¨å‹•ä½œã—ã¦ã„ã‚‹ç‚¹: ç®¡ç†è€…ã®å°åˆ·ç”»é¢ï¼ˆ\`/admin/print/<eventId>\`ï¼‰ã§ \`/u/scan?eventId=<eventId>\` ã® QR ã‚’ç”Ÿæˆã—ã€å°åˆ·/PDFå‡ºåŠ›ã§ãã‚‹ã€‚
- ç¾åœ¨å‹•ä½œã—ã¦ã„ã‚‹ç‚¹: åˆ©ç”¨è€…ç”»é¢ \`/u/scan\` ã§ã‚«ãƒ¡ãƒ©æ¨©é™ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ä»˜ãã® QR èª­ã¿å–ã‚Šã‚’å®Ÿè£…ï¼ˆin-app decodeï¼‰ã€‚
- ç¾åœ¨å‹•ä½œã—ã¦ã„ã‚‹ç‚¹: QR æ–‡å­—åˆ—ã‹ã‚‰ \`eventId\` ã‚’æŠ½å‡ºã—ã€\`/u/confirm?eventId=...\` ã¸é·ç§»ã§ãã‚‹ã€‚
- ç¾åœ¨å‹•ä½œã—ã¦ã„ã‚‹ç‚¹: Web ã¯ \`@zxing/browser\` ã§èª­ã¿å–ã‚Šï¼ˆBarcodeDetector éå¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰ã€‚
- ç¾åœ¨ã®åˆ¶é™: ã‚¹ã‚­ãƒ£ãƒ³ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¯ URL ãƒ™ãƒ¼ã‚¹ï¼ˆ\`eventId\` ãŒæœªæŒ‡å®šã®å ´åˆã¯ \`evt-001\`ï¼‰ã§ã€PoC ãƒ‡ãƒ¢å†ç¾æ€§ã‚’å„ªå…ˆã—ã¦ã„ã‚‹ã€‚
- ç¾æ™‚ç‚¹ã®ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ãƒ†ã‚¹ãƒˆ: ç¾è¡Œã® Demo æ‰‹é †ã©ãŠã‚Šã« \`/u/scan -> /u/confirm -> /u/success\` ã¨ Explorer ãƒªãƒ³ã‚¯ã‚’ç¢ºèªã™ã‚‹ã€‚

Reviewer shortcut: \`./wene-mobile/src/screens/user/UserScanScreen.tsx\` ã¨ \`./wene-mobile/src/screens/admin/AdminPrintScreen.tsx\` ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

### ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼ˆPoCå®Œäº†ã¾ã§ï¼‰

- ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³1ï¼ˆ\`çŠ¶æ…‹ï¼šå®Œäº†\`ï¼‰: \`/u/scan\` ã«å®Ÿã‚¹ã‚­ãƒ£ãƒ³å‡¦ç†ï¼ˆQRãƒ‡ã‚³ãƒ¼ãƒ‰ + æ¨©é™ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼‰ã‚’å®Ÿè£…ã€‚
- ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³2ï¼ˆ\`çŠ¶æ…‹ï¼šäºˆå®š\`ï¼‰: \`eventId\` æ‰‹å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ + æœŸé™åˆ‡ã‚Œ/ç„¡åŠ¹ QR ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ ã—ã€UI/API ãƒ†ã‚¹ãƒˆã§å›ºå®šã™ã‚‹ã€‚

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰

\`\`\`bash
cd wene-mobile
npm i
npm run dev:full
\`\`\`

èµ·å‹•å¾Œã®ç¢ºèªå…ˆ:

- ç®¡ç†ç”»é¢ä¸€è¦§: \`http://localhost:8081/admin\`
- åˆ©ç”¨è€…ã‚¹ã‚­ãƒ£ãƒ³å°ç·š: \`http://localhost:8081/u/scan?eventId=evt-001\`

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆCloudflare Pagesï¼‰

ã“ã®ãƒ¢ãƒãƒ¬ãƒã® Cloudflare Pages è¨­å®š:

- Root directory: \`wene-mobile\`
- Build command: \`npm ci && npm run export:web\`
- Output directory: \`dist\`

\`export:web\` ã®å¿…é ˆæ¡ä»¶:

- \`EXPO_PUBLIC_API_BASE_URL\`ï¼ˆã¾ãŸã¯ \`EXPO_PUBLIC_SCHOOL_API_BASE_URL\`ï¼‰ã« Worker URL ã‚’è¨­å®šã™ã‚‹ã€‚
- æœªè¨­å®šã®å ´åˆã€\`scripts/gen-redirects.js\` ãŒå¤±æ•—ã™ã‚‹ã€‚proxy ç”¨ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãŒç”Ÿæˆã•ã‚Œãªã„ã¨ã€\`/api/*\` ã¨ \`/v1/*\` ãŒ Pages ã«ç›´æ¥å½“ãŸã‚Š \`405\` ã‚„ HTML ã‚’è¿”ã™å ´åˆãŒã‚ã‚‹ã€‚

ã‚³ãƒ”ãƒšç”¨ãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰:

\`\`\`bash
cd wene-mobile
EXPO_PUBLIC_API_BASE_URL="https://<your-worker>.workers.dev" npm run export:web
npm run deploy:pages
npm run verify:pages
\`\`\`

## ãƒ‡ãƒ¢ / å†ç¾æ‰‹é †ï¼ˆ1ãƒšãƒ¼ã‚¸ï¼‰

1. ç®¡ç†è€…ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ã‚’é–‹ã: \`/admin\`
2. ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ã‚’é–‹ã: \`/admin/events/<eventId>\`ï¼ˆä¾‹: \`evt-001\`ã€state ã¯ \`published\` æ¨å¥¨ï¼‰ã€‚
3. è©³ç´°ç”»é¢ã®ã€Œå°åˆ·ç”¨PDFã€ã‹ã‚‰å°åˆ·ç”»é¢ã¸é·ç§»: \`/admin/print/<eventId>\`ã€‚
4. å°åˆ· QR ã®ãƒªãƒ³ã‚¯å…ˆãŒ \`/u/scan?eventId=<eventId>\` ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã€‚
5. åˆ©ç”¨è€…å´ã§ QR URL ã‚’é–‹ã -> \`/u/confirm?eventId=<eventId>\` -> claim -> \`/u/success?eventId=<eventId>\`ã€‚
6. Success ç”»é¢ã§ tx signature ã¨ receipt pubkey ã® Explorer ãƒªãƒ³ã‚¯ã‚’ç¢ºèª:
- \`https://explorer.solana.com/tx/<signature>?cluster=devnet\`
- \`https://explorer.solana.com/address/<receiptPubkey>?cluster=devnet\`
7. åŒã˜ QR ã§å†åº¦ claim: æœŸå¾…æŒ™å‹•ã¯ \`already joined\` ã®é‹ç”¨å®Œäº†æ‰±ã„ï¼ˆé‡è¤‡æ”¯æ‰•ã„ãªã—ï¼‰ã€‚

## æ¤œè¨¼ã‚³ãƒãƒ³ãƒ‰

Pages æ¤œè¨¼ãƒã‚§ãƒ¼ãƒ³:

\`\`\`bash
cd wene-mobile
npm run export:web
npm run deploy:pages
npm run verify:pages
\`\`\`

\`verify:pages\` ã®ç¢ºèªé …ç›®:

- \`/admin\` ã®é…ä¿¡ bundle SHA256 ãŒãƒ­ãƒ¼ã‚«ãƒ« \`dist\` ã¨ä¸€è‡´ã™ã‚‹ã€‚
- \`GET /v1/school/events\` ãŒ \`200\` ã‹ã¤ \`application/json\` ã‚’è¿”ã™ã€‚
- \`POST /api/users/register\` ãŒ **\`405 Method Not Allowed\` ã§ã¯ãªã„**ã€‚

æ‰‹å‹•ã‚¹ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯:

\`\`\`bash
BASE="https://<your-pages-domain>"

curl -sS -D - "$BASE/v1/school/events" -o /tmp/wene_events.json | sed -n '1p;/content-type/p'
curl -sS -o /dev/null -w '%{http_code}\n' -X POST \\
  -H 'Content-Type: application/json' \\
  -d '{}' \\
  "$BASE/api/users/register"
\`\`\`

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° / æ—¢çŸ¥ã®æŒ™å‹•

- \`/v1/school/events\` ãŒ HTML ã‚’è¿”ã™: \`_redirects\` proxy ãŒæœªé©ç”¨ã€ã¾ãŸã¯èª¤ã£ãŸæˆæœç‰©ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ã‚‹ã€‚
- \`/_redirects\` ã‚’ç›´æ¥ fetch ã—ã¦ 404: Pages ã§ã¯æ­£å¸¸ãªå ´åˆãŒã‚ã‚‹ã€‚\`/v1\` ãŒ JSON ã‹ã€\`/api\` ãŒé 405 ã‹ã§å®Ÿè¡Œæ™‚æŒ™å‹•ã‚’ç¢ºèªã™ã‚‹ã€‚
- ãƒ­ã‚°ã‚¤ãƒ³/åˆ©ç”¨è€…çŠ¶æ…‹ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã‚„ç«¯æœ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿æŒã•ã‚Œã‚‹æƒ³å®šã€‚å…±ç”¨ç«¯æœ«ãƒ†ã‚¹ãƒˆã§ã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ©ã‚¦ã‚ºæ¨å¥¨ã€‚
- Web ã® \`/u/scan\` ã‚«ãƒ¡ãƒ©ã‚¹ã‚­ãƒ£ãƒ³ã¯å®Ÿè£…æ¸ˆã¿ï¼ˆPoCï¼‰ã ãŒã€ãƒ–ãƒ©ã‚¦ã‚¶/ç«¯æœ«ã®æ¨©é™ã‚„äº’æ›æ€§ã«ã‚ˆã£ã¦å¤±æ•—ã™ã‚‹å ´åˆãŒã‚ã‚‹ã€‚ãƒ‡ãƒ¢å†ç¾æ€§ã‚’æœ€å¤§åŒ–ã™ã‚‹ã«ã¯ã€å°åˆ· QR ã‚’ã‚¹ãƒãƒ›ã‚«ãƒ¡ãƒ©/QR ãƒªãƒ¼ãƒ€ãƒ¼ã§èª­ã¿å–ã‚Š \`/u/scan?eventId=<eventId>\` ã‚’é–‹ãã“ã¨ã‚’æ¨å¥¨ã™ã‚‹ã€‚

## è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- School PoC guide: \`wene-mobile/README_SCHOOL.md\`
- Cloudflare Pages deployment notes: \`CLOUDFLARE_PAGES.md\`
- Worker API details: \`README.md\`
- Devnet setup: \`DEVNET_SETUP.md\`

## å¯©æŸ»å“¡å‘ã‘ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯åŠ©æˆé‡‘/PoCå¯©æŸ»ç”¨ã® **å†ç¾ãƒ»è©•ä¾¡ã‚­ãƒƒãƒˆ** ã§ã™ã€‚æ©Ÿèƒ½ã®ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚ˆã‚Šã‚‚ã€**å†ç¾æ€§** ã¨ **ç‹¬ç«‹æ¤œè¨¼**ï¼ˆç‰¹ã« Explorer è¨¼è·¡ï¼‰ã®ç¢ºèªã‚’å„ªå…ˆã—ã¦ãã ã•ã„ã€‚
